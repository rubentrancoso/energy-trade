# üìù Changelog ‚Äî v1.3.0-cancel

## üö´ Order Cancellation Logic

This version introduces **Order Cancellation**, allowing clients to cancel pending orders under valid conditions. It improves system flexibility, auditability, and real-world simulation fidelity.

### ‚úÖ Implemented Features

- New `cancelOrder(Long orderId)` endpoint in `OrderController`
- Business rule: only `PENDING` orders can be cancelled
- Timestamp `cancelledAt` is saved upon cancellation
- Order status updated to `CANCELLED`
- **AuditEvent** generated on successful cancellation with type `ORDER_CANCELLED`
- Optional **Notification** sent when an order is cancelled
- **IntegrationSimulator** enhanced to test cancellation scenarios
- Full test coverage with:
  - Unit tests (`OrderControllerTest`) for successful and edge case cancellations
  - Integration simulation including cancellation of recent orders

### üîç Logs & Observability

- Cancelled orders fully traced through log collector
- Audit log sample:
```json
{
  "type": "ORDER_CANCELLED",
  "source": "order-service",
  "payload": {
    "orderId": 42,
    "cancelledAt": "2025-06-07T12:34:56Z"
  }
}
```

### ‚ö†Ô∏è Known Limitations

- Cannot cancel orders that are already `EXECUTED`, `CANCELLED`, or `EXPIRED`
- No authentication or authorization logic yet applied to cancellation requests

---

üìÖ Release Date: 2025-06-07  
üîñ Tag: [`v1.3.0-cancel`](https://github.com/rubentrancoso/energy-trade/releases/tag/v1.3.0-cancel)
